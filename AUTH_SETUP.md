# 認証設定ガイド

このアプリケーションにはIDとパスワードの二段階認証機能が実装されています。

## 環境変数の設定

認証IDとパスワードは環境変数で管理します。

### 1. `.env`ファイルの作成

プロジェクトのルートディレクトリに`.env`ファイルを作成し、以下の環境変数を設定してください：

```env
VITE_AUTH_USER_ID=your-user-id
VITE_AUTH_PASSWORD=your-secure-password-here
```

**重要：**
- `.env`ファイルは`.gitignore`に追加して、Gitリポジトリにコミットしないでください
- 本番環境では、強力なIDとパスワードを設定してください
- デフォルト値（`admin` / `admin2130`）は開発環境でのみ使用してください

### 2. 環境変数の読み込み

Viteでは、環境変数は`VITE_`プレフィックスが必要です。アプリケーション起動時に自動的に読み込まれます。

### 3. セッション管理

- セッション有効期限：24時間
- セッション情報は`localStorage`に保存されます
- ブラウザを閉じても、24時間以内であれば再認証不要です
- パスワードが変更された場合、既存のセッションは自動的に無効化されます

## セキュリティに関する注意事項

### 現在の実装

- IDとパスワードは環境変数で管理
- セッションは有効期限付き（24時間）
- パスワード変更検知機能（環境変数が変更されたら自動でセッション無効化）
- IDとパスワードは平文で比較（開発環境向け）

### 本番環境での推奨事項

本番環境でより高いセキュリティが必要な場合は、以下の改善を検討してください：

1. **パスワードのハッシュ化**
   - パスワードをハッシュ化して保存・比較
   - bcryptやArgon2などのハッシュアルゴリズムを使用

2. **HTTPSの使用**
   - 本番環境では必ずHTTPSを使用してください

3. **セッション管理の強化**
   - セッション有効期限の短縮（例：1時間）
   - セッショントークンのランダム化

4. **レート制限**
   - ログイン試行回数の制限
   - ブルートフォース攻撃対策

## 使用方法

1. アプリケーションを起動すると、認証画面が表示されます
2. 環境変数で設定したIDとパスワードを入力
3. 「ログイン」ボタンをクリック
4. 認証が成功すると、アプリケーションが使用可能になります
5. ログアウトする場合は、ツールバーの「ログアウト」ボタンをクリック

## パスワード変更について

パスワードを変更する場合は、以下の手順で行います：

1. `.env`ファイルを開き、`VITE_AUTH_PASSWORD`の値を変更
2. アプリケーションを再起動（開発サーバーを停止して再起動）
3. パスワード変更後、既存のセッションは自動的に無効化されます
4. 新しいIDとパスワードで再ログインしてください

## トラブルシューティング

### IDまたはパスワードが認識されない場合

1. `.env`ファイルがプロジェクトルートに存在するか確認
2. 環境変数名が`VITE_AUTH_USER_ID`と`VITE_AUTH_PASSWORD`であるか確認
3. アプリケーションを再起動（環境変数の変更は再起動が必要）
4. ブラウザのコンソールでエラーを確認

### セッションが切れる場合

- セッション有効期限は24時間です
- 期限切れの場合は、再度ログインが必要です
- パスワードが変更された場合も、セッションは自動的に無効化されます
